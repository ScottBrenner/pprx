{% extends "scorebrowser/base.html" %}
{% load static %}
{% load pprxtras %}
{% load humanize %}

{% block title %}PPR X Score Browser{% endblock %}

{% block scripts %}
	<script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
	<script src="{% static 'scores-1.0.8.js' %}"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
{% endblock %}

{% block content %}
	<p>Charts with a <span class="extra-exclusive">pink background</span> are only available on Extra Stage on your selected cabinet.</p>

	<p>
		Cabinet:
		<select id="cabinet-select">
			{% for cabinet in cabinets %}
				<option value="{{ cabinet.id }}">{{ cabinet.name }}</option>
			{% endfor %}
		</select>

		Version:
		<select id="version-select" class="select-filter">
			<option selected value=0>All</option>
			{% for version in versions %}
				<option value="{{ version.id }}">{{ version.name }}</option>
			{% endfor %}
		</select>

		Level:
		<select id="level-select">
			<option selected value=0>All</option>
			<option value=7>7</option>
			<option value=8>8</option>
			<option value=9>9</option>
			<option value=10>10</option>
			<option value=11>11</option>
			<option value=12>12</option>
			<option value=13>13</option>
			<option value=14>14</option>
			<option value=15>15</option>
			<option value=16>16</option>
			<option value=17>17</option>
			<option value=18>18</option>
			<option value=19>19</option>
		</select>
		<span id="level-range" hidden>
			<select id="level-min" class="select-filter">
				<option selected value=7>7</option>
				<option value=8>8</option>
				<option value=9>9</option>
				<option value=10>10</option>
				<option value=11>11</option>
				<option value=12>12</option>
				<option value=13>13</option>
				<option value=14>14</option>
				<option value=15>15</option>
				<option value=16>16</option>
				<option value=17>17</option>
				<option value=18>18</option>
				<option value=19>19</option>
			</select>
			to
			<select id="level-max" class="select-filter">
				<option value=7>7</option>
				<option value=8>8</option>
				<option value=9>9</option>
				<option value=10>10</option>
				<option value=11>11</option>
				<option value=12>12</option>
				<option value=13>13</option>
				<option value=14>14</option>
				<option value=15>15</option>
				<option value=16>16</option>
				<option value=17>17</option>
				<option value=18>18</option>
				<option selected value=19>19</option>
			</select>
		</span>
	</p>

	<p>
		Show locked charts:
		<input type="checkbox" id="show-locked" class="select-filter">

		Hide auto-spiced songs:
		<input type="checkbox" id="hide-autospice" class="select-filter">
	</p>

	<p>
		Scores from last
		<input type="text" id="time-range" class="text-filter">
		<select id="time-type" class="select-filter">
			<option selected value='hours'>hours</option>
			<option value='days'>days</option>
		</select>
	</p>

	<p>
		Score:
		<input type="text" id="min-score" class="text-filter score-input">
		to
		<input type="text" id="max-score" class="text-filter score-input">

		Hide met goals:
		<input type="checkbox" id="hide-met-goals" class="select-filter">
	</p>

	<div style="display: none" id="jsonData" data-json="{{ scores }}"></div>
	<table id="scores" class="row-border hover" width="100%"></table>

	<p class="unhide-container" hidden>
		<button class="unhide-button">Unhide manually-hidden charts</button>
	</p>

	{% for cab, avgs in averages.items %}
		<p id="{{ cab }}-averages" class="averages" hidden>
			14 average: {{ avgs|dict_key:14|intcomma }}<br />
			15 average: {{ avgs|dict_key:15|intcomma }}<br />
			16 average: {{ avgs|dict_key:16|intcomma }}<br />
			17 average: {{ avgs|dict_key:17|intcomma }}<br />
			18 average: {{ avgs|dict_key:18|intcomma }}<br />
			19 average: {{ avgs|dict_key:19|intcomma }}<br />
		</p>
	{% endfor %}
{% endblock %}
